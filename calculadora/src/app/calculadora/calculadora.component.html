<div class="calculator-container">
  <h1>Calculadora de Empréstimos</h1>
  
  <div class="input-container">
    <div class="input-field">
      <label>Data Inicial</label>
      <input type="date" [(ngModel)]="dataInicial" name="dataInicial" (ngModelChange)="onInputChange()" required>
    </div>

    <div class="input-field">
      <label>Data Final</label>
      <input type="date" [(ngModel)]="dataFinal" name="dataFinal" (ngModelChange)="onInputChange()" required>
    </div>

    <div class="input-field">
      <label>Primeiro Pagamento</label>
      <input type="date" [(ngModel)]="primeiroPagamento" name="primeiroPagamento" (ngModelChange)="onInputChange()" required>
    </div>

    <div class="input-field">
      <label>Valor do Empréstimo</label>
      <input 
        type="text" 
        [ngModel]="valorEmprestimoFormatado" 
        (ngModelChange)="formatarValorEmprestimo($event)"
        name="valorEmprestimo" 
        placeholder="0,00"
        required>
    </div>

    <div class="input-field">
      <label>Taxa de Juros</label>
      <input 
        type="text" 
        [ngModel]="taxaJurosFormatada"
        (ngModelChange)="formatarTaxaJuros($event)"
        name="taxaJuros" 
        placeholder="0%"
        required>
    </div>

    <button class="calculate-btn" [disabled]="!formValido" (click)="calcular()">Calcular</button>
  </div>

  <div class="results-grid">
    <table>
      <thead>
        <tr>
          <th class="data-header">Data Competência</th>
          <th colspan="2" class="group-header">Empréstimo</th>
          <th colspan="3" class="group-header">Parcela</th>
          <th colspan="2" class="group-header">Principal</th>
          <th colspan="2" class="group-header">Juros</th>
        </tr>
        <tr>
          <th class="sub-header"></th>
          <th class="sub-header">Valor do Empréstimo</th>
          <th class="sub-header">Saldo Devedor</th>
          <th class="sub-header">Consolidada</th>
          <th class="sub-header">Total</th>
          <th class="sub-header">Amortização</th>
          <th class="sub-header">Saldo</th>
          <th class="sub-header">Provisão</th>
          <th class="sub-header">Acumulado</th>
          <th class="sub-header">Pago</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let resultado of resultados">
          <td class="date-cell">{{resultado.dataCompetencia | date:'dd/MM/yyyy'}}</td>
          <td>{{resultado.valorEmprestimo | number:'1.2-2'}}</td>
          <td>{{resultado.saldoDevedor | number:'1.2-2'}}</td>
          <td>{{resultado.consolidada | number:'1.2-2'}}</td>
          <td>{{resultado.total | number:'1.2-2'}}</td>
          <td>{{resultado.amortizacao | number:'1.2-2'}}</td>
          <td>{{resultado.saldo | number:'1.2-2'}}</td>
          <td>{{resultado.provisao | number:'1.2-2'}}</td>
          <td>{{resultado.acumulado | number:'1.2-2'}}</td>
          <td>{{resultado.pago | number:'1.2-2'}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div> 